{"version":3,"file":"BaseTextField.stories-6dbd1d1f.js","sources":["../../src/components/Input/BaseTextField.vue"],"sourcesContent":["<template>\n  <div class=\"base-text-field\" :class=\"{\n    ['base-text-field-has-label']: label,\n    [`base-text-field-${variant}`]: variant\n  }\">\n    <label\n        v-if=\"label\"\n        for=\"base-text-field-input-name\"\n        class=\"base-text-field-label\"\n        :style=\"customStyleLabel\"\n        :class=\"{\n          ['base-text-field-label-active']: (currentValue?.length || inputFocused) && !readonly\n        }\"\n    >{{ label }}</label>\n    <input\n        name=\"base-text-field-input-name\"\n        type=\"text\"\n        class=\"base-text-field-input\"\n        v-model=\"currentValue\"\n        :class=\"{\n            [`base-text-field-input-${variant}`]: variant,\n            ['base-text-field-error']: hasError && !loading,\n            ['base-text-field-border']: variant === 'outlined',\n            ['base-text-field-input-has-spinner']: loading && !useBorderLoading,\n            ['base-text-field-input-has-base-color']: variant === 'default',\n            ['base-text-field-input-has-dark-color']: variant === 'dark'\n        }\"\n        :required=\"required\"\n        :style=\"[customStyle, { width, height }]\"\n        :placeholder=\"(currentValue?.length || inputFocused) && !readonly ? placeholder : ''\"\n        :disabled=\"disabled || (disableOnLoading && loading)\"\n        :readonly=\"readonly\"\n        @input=\"emitInputValue\"\n        @change=\"emitChangeValue\"\n        @blur=\"emitBlurValue\"\n        @focus=\"inputFocused = true\"\n        v-bind=\"bind\"\n    >\n    <div class=\"base-text-field-loading-border\" :style=\"{ ['background-color']: loadingColor }\" v-if=\"loading && useBorderLoading\"></div>\n    <Spinner class=\"base-text-field-spinner\" size=\"small\" :color-spinner=\"loadingColor\" v-else-if=\"loading\"></Spinner>\n    <span class=\"error-message\" v-else>{{ errorMessage }}</span>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, watch, computed } from 'vue'\nimport Spinner from '@/components/Spinner/Spinner.vue'\nimport {Simulate} from \"react-dom/test-utils\";\nimport load = Simulate.load;\n\n/* === Props === */\nconst props = defineProps({\n\tmodelValue: {\n\t\ttype: String,\n\t\tdefault: null\n\t},\n\tbind: {\n\t\ttype: Object,\n\t\tdefault: null\n\t},\n\tvariant: {\n\t\ttype: String,\n\t\tdefault: 'default',\n\t\tvalidator: (value: string) => ['default', 'outlined', 'underlined', 'dark'].includes(value),\n\t},\n\tuseBorderLoading: {\n\t\ttype: Boolean,\n\t\tdefault: false\n\t},\n\tloadingColor: {\n\t\ttype: String,\n\t\tdefault: '#3498db'\n\t},\n\tdisabled: {\n\t\ttype: Boolean,\n\t\tdefault: false\n\t},\n\treadonly: {\n\t\ttype: Boolean,\n\t\tdefault: false\n\t},\n\tloading: {\n\t\ttype: Boolean,\n\t\tdefault: false\n\t},\n\tlabel: {\n\t\ttype: String,\n\t\tdefault: null\n\t},\n\tplaceholder: {\n\t\ttype: String,\n\t\tdefault: null\n\t},\n\tdisableOnLoading: {\n\t\ttype: Boolean,\n\t\tdefault: false\n\t},\n\tmaxLength: {\n\t\ttype: Number,\n\t\tdefault: null\n\t},\n\tminLength: {\n\t\ttype: Number,\n\t\tdefault: 0\n\t},\n\trequired: {\n\t\ttype: Boolean,\n\t\tdefault: false\n\t},\n  width: {\n    type: String,\n    default: '100%'\n  },\n  height: {\n    type: String,\n    default: '30px'\n  },\n\trules: {\n\t\ttype: Array<() => string | boolean>,\n\t\tdefault: []\n\t},\n\tcustomStyle: {\n\t\ttype: String,\n\t\tdefault: ''\n\t},\n\tcustomStyleLabel: {\n\t\ttype: String,\n\t\tdefault: ''\n\t},\n\tdisableRequiredRule: {\n\t\ttype: Boolean,\n\t\tdefault: false\n\t}\n})\n\n/* === State === */\nconst currentValue = ref(props.modelValue)\nconst inputFocused = ref(false)\nconst hasError = ref(false)\nconst errorMessage = ref('')\n\n/* === Computed === */\nconst allRules = computed(() => {\n\tconst rules = []\n\tif (props.required && !props.disableRequiredRule) {\n\t\trules.push((value: string) => !!value && !!value.length && value !== '' || 'Required field')\n\t}\n\n\tif (props.minLength) {\n\t\trules.push((value: string) => value.length >= props.minLength || `Min ${props.minLength} characters`)\n\t}\n\n\tif (props.maxLength) {\n\t\trules.push((value: string) => value.length <= props.maxLength || `Max ${props.maxLength} characters`)\n\t}\n\n\treturn [...rules, ...props.rules]\n})\n\n/* === Methods === */\nconst validateRules = () => {\n\tif (props.readonly) {\n\t\treturn\n\t}\n\tconst errors = allRules\n\t\t.value\n\t\t.map((rule) => rule(currentValue.value))\n\t\t.filter(result => typeof result === 'string' || result === false)\n\terrorMessage.value = errors[0] as string\n\thasError.value = !!errors.length\n}\n\n/* === Emits === */\nconst emits = defineEmits(['input:value', 'change:value', 'blur:value'])\nconst emitInputValue = () => {\n\tvalidateRules()\n\temits('input:value', currentValue)\n}\nconst emitChangeValue = () => {\n\tvalidateRules()\n\temits('change:value', currentValue)\n}\nconst emitBlurValue = () => {\n\tinputFocused.value = false\n\tvalidateRules()\n\temits('blur:value', currentValue)\n}\n\n/* === Watchers === */\nwatch(currentValue, () => {\n\tvalidateRules()\n})\n</script>\n\n<style lang=\"scss\">\n@import '@/components/main.scss';\n\n@keyframes loadingBorder {\n  0% {\n    transform: scaleX(0);\n  }\n  10% {\n    transform: scaleX(0.5)\n  }\n  30% {\n    transform: scaleX(0.7)\n  }\n  50% {\n    transform: scaleX(0.8);\n  }\n  75% {\n    transform: scaleX(0.9);\n  }\n  100% {\n    transform: scaleX(1);\n  }\n}\n\n.base-text-field {\n  position: relative;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: $size-tiny-3x;\n\n  [disabled] {\n    background-color: $disabled-color;\n  }\n\n  &-has-label {\n    margin-top: $size-small-1x;\n  }\n\n  &-input {\n    height: 2em;\n    border: none;\n    padding-left: $size-tiny-3x;\n    border-bottom: 1px solid $label-color;\n\n    &-underlined {\n      outline: none;\n\n      &:focus {\n       border-color:  $label-color;\n      }\n    }\n\n    &-has-base-color {\n      background-color: $base-color;\n      color: $label-color;\n\n      &:focus {\n        outline: none;\n        border-color: $dark-label-color;\n      }\n    }\n\n    &-has-dark-color {\n      background-color: $dark-base-color;\n      border-bottom: 1px solid $dark-label-color;\n      color: $dark-label-color;\n\n      &:focus {\n        outline: none;\n        border-color: $label-color;\n      }\n    }\n\n    &-has-spinner {\n      padding-right: $size-large-2x;\n      box-sizing: border-box;\n    }\n  }\n\n  &-border {\n    &:not(.has-dark-color) {\n      border: 1px solid $label-color;\n    }\n    &:not(.has-base-color) {\n      border: 1px solid $dark-label-color;\n    }\n    border-radius: 0.4em;\n    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);\n    margin-top: 0.1em;\n  }\n\n  &-loading-border {\n    height: 2px;\n    border-style: solid;\n    border-radius: 0.4em;\n    transform-origin: left;\n    animation: loadingBorder 3s linear infinite;\n  }\n\n  &-spinner {\n    position: absolute;\n    top: 0.35em;\n    right: 0.4em;\n  }\n\n  &-error {\n    border-color: $error-color;\n\n    &:focus {\n      border-color: $error-color;\n    }\n  }\n\n  .error-message {\n    font-family: 'Arial', serif;\n    color: $error-color;\n    font-size: 0.7em;\n    margin-top: $size-tiny-1x;\n    margin-left: $size-tiny-3x;\n    font-weight: bolder;\n    display: inline-block;\n  }\n\n  &-label {\n    color: $label-color;\n    pointer-events: none;\n    font-size: $size-small-1x;\n    position: absolute;\n    transition: top 100ms, left 500ms;\n    left: $size-tiny-3x;\n    top: 0.8em;\n\n    &-active {\n      top: -1.1em;\n      font-size: 0.7em;\n      font-weight: bold;\n    }\n  }\n}\n</style>"],"names":["props","__props","currentValue","ref","inputFocused","hasError","errorMessage","allRules","computed","rules","value","validateRules","errors","rule","result","emits","__emit","emitInputValue","emitChangeValue","emitBlurValue","watch"],"mappings":"s1CAmDA,MAAMA,EAAQC,EAqFRC,EAAeC,EAAIH,EAAM,UAAU,EACnCI,EAAeD,EAAI,EAAK,EACxBE,EAAWF,EAAI,EAAK,EACpBG,EAAeH,EAAI,EAAE,EAGrBI,GAAWC,GAAS,IAAM,CAC/B,MAAMC,EAAQ,CAAA,EACd,OAAIT,EAAM,UAAY,CAACA,EAAM,qBAC5BS,EAAM,KAAMC,GAAkB,CAAC,CAACA,GAAS,CAAC,CAACA,EAAM,QAAUA,IAAU,IAAM,gBAAgB,EAGxFV,EAAM,WACHS,EAAA,KAAMC,GAAkBA,EAAM,QAAUV,EAAM,WAAa,OAAOA,EAAM,SAAS,aAAa,EAGjGA,EAAM,WACHS,EAAA,KAAMC,GAAkBA,EAAM,QAAUV,EAAM,WAAa,OAAOA,EAAM,SAAS,aAAa,EAG9F,CAAC,GAAGS,EAAO,GAAGT,EAAM,KAAK,CAAA,CAChC,EAGKW,EAAgB,IAAM,CAC3B,GAAIX,EAAM,SACT,OAED,MAAMY,EAASL,GACb,MACA,IAAKM,GAASA,EAAKX,EAAa,KAAK,CAAC,EACtC,OAAOY,GAAU,OAAOA,GAAW,UAAYA,IAAW,EAAK,EACpDR,EAAA,MAAQM,EAAO,CAAC,EACpBP,EAAA,MAAQ,CAAC,CAACO,EAAO,MAAA,EAIrBG,EAAQC,GACRC,GAAiB,IAAM,CACdN,IACdI,EAAM,cAAeb,CAAY,CAAA,EAE5BgB,GAAkB,IAAM,CACfP,IACdI,EAAM,eAAgBb,CAAY,CAAA,EAE7BiB,GAAgB,IAAM,CAC3Bf,EAAa,MAAQ,GACPO,IACdI,EAAM,aAAcb,CAAY,CAAA,EAIjC,OAAAkB,GAAMlB,EAAc,IAAM,CACXS,GAAA,CACd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}